# Ethernet Bridge

Универсальный скрипт настройки сетевого моста для Linux систем, обеспечивающий двусторонний доступ к портам между устройствами. Создает мост между Wi-Fi и Ethernet с DHCP для подключенных устройств.

## Основные возможности

- Создание сетевого моста между Wi-Fi и Ethernet интерфейсами
- Поддержка DHCP для автоматического назначения IP-адресов подключенным устройствам
- Двусторонний доступ к портам между устройствами
- Поддержка различных Linux-дистрибутивов (Void Linux, Debian, Ubuntu, CentOS, Arch Linux и др.)
- Гибкая настройка через команды и конфигурационный файл

## Установка

### С помощью Make:

```bash
make install
```

### Вручную:

```bash
sudo cp src/ethernet-bridge /usr/local/bin/
sudo chmod +x /usr/local/bin/ethernet-bridge
```

## Использование

### Основные команды

```
╭─УПРАВЛЕНИЕ МОСТОМ─────────────────────────╮
│ start                                     │
│ stop                                      │
│ restart                                   │
│ status                                    │
╰───────────────────────────────────────────╯

╭─ИНФОРМАЦИЯ И СТАТУС───────────────────────╮
│ devices                                   │
│ rules                                     │
│ logs                                      │
╰───────────────────────────────────────────╯

╭─УПРАВЛЕНИЕ ПОРТАМИ────────────────────────╮
│ port open <порт>                          │
│ port close <порт>                         │
│ port list-open                            │
╰───────────────────────────────────────────╯

╭─КОНФИГУРАЦИЯ ПОДКЛЮЧЕНИЙ──────────────────╮
│ static-ip <MAC> <IP>                      │
│ set-dns <IP>                              │
╰───────────────────────────────────────────╯

╭─СЕТЕВЫЕ НАСТРОЙКИ─────────────────────────╮
│ limit-bandwidth <rate>                    │
│ remove-bandwidth-limit                    │
╰───────────────────────────────────────────╯

╭─СИСТЕМНЫЕ НАСТРОЙКИ───────────────────────╮
│ autostart enable                          │
│ autostart disable                         │
│ info <команда>                            │
╰───────────────────────────────────────────╯
```

### Примеры использования

- Запустить мост: `sudo ethernet-bridge start`
- Проверить статус: `sudo ethernet-bridge status`
- Открыть порт: `sudo ethernet-bridge port open 8000`
- Закрыть порт: `sudo ethernet-bridge port close 8000`
- Показать открытые порты: `sudo ethernet-bridge port list-open`
- Назначить статический IP: `sudo ethernet-bridge static-ip aa:bb:cc:dd:ee:ff 192.168.100.100`
- Установить DNS: `sudo ethernet-bridge set-dns 8.8.8.8`
- Показать логи: `sudo ethernet-bridge logs`

### Автозапуск

Скрипт автоматически определяет используемую init-систему (systemd, OpenRC, s6, runit, SysV) и создает соответствующую службу автозапуска:

```bash
# Включить автозапуск
sudo ethernet-bridge autostart enable

# Отключить автозапуск
sudo ethernet-bridge autostart disable
```

## Конфигурация

Скрипт поддерживает конфигурационный файл `/etc/ethernet-bridge.conf`, где можно задать:

- Сетевые интерфейсы
- Настройки DNS
- Статические IP-адреса
- Ограничения пропускной способности
- Открытые порты

## Зависимости

Для работы скрипта требуются:

- bridge-utils
- dnsmasq
- iptables
- iproute2 (для команды tc, если используется ограничение пропускной способности)

## Автор

Скрипт разработан для универсального использования в различных Linux-окружениях.

## Лицензия

MIT
